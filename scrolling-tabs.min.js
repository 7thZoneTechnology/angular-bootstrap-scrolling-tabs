(function(){var b={CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL:50,SCROLL_OFFSET_FRACTION:6,SCROLL_ARROW_WIDTH:20,DATA_KEY_IS_MOUSEDOWN:"ismousedown"},a=angular.module("mj.scrollingTabs",[]),d=['<div class="scrtabs-tab-container">',' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="glyphicon glyphicon-chevron-left"></span></div>','   <div class="scrtabs-tabs-fixed-container">','     <div class="scrtabs-tabs-movable-container">','       <ul class="nav nav-tabs" role="tablist">','         <li ng-class="{ \'active\': tabObj.isActive }" data-tab-obj="{{tabObj}}" data-index="{{$index}}" ng-repeat="tabObj in tabsArr">','           <a ng-href="{{\'#\' + tabObj.id}}" role="tab" data-toggle="tab">{{tabObj.title}}</a>',"         </li>","       </ul>","     </div>"," </div>",' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="glyphicon glyphicon-chevron-right"></span></div>',"</div>"].join("");(function(g,f){var e=function(k,h,i){var l;return function j(){var o=this,n=arguments;function m(){if(!i){k.apply(o,n)}l=null}if(l){clearTimeout(l)}else{if(i){k.apply(o,n)}}l=setTimeout(m,h||100)}};jQuery.fn[f]=function(h){return h?this.bind("resize.scrtabs",e(h)):this.trigger(f)}})(jQuery,"smartresize");function c(x){var y,s,u,q,r,z,e,o,j,v=b.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL,A,n,p,m=0,k,g=b.SCROLL_ARROW_WIDTH*2,f=true,w=b.SCROLL_ARROW_WIDTH,i,h=b.SCROLL_OFFSET_FRACTION,l;i=(function(){function G(){x(function(){if(s.data(b.DATA_KEY_IS_MOUSEDOWN)&&(m<0)){if(!H()){G()}}},v)}function E(O){x(function(){if(q.data(b.DATA_KEY_IS_MOUSEDOWN)&&(m>O)){if(!J(O)){E(O)}}},v)}function F(O){m-=(p/h);if(m<O){m=O}}function N(){return f?(p-k-g):0}function L(){return(m===0)?"0":m+"px"}function H(){m+=(p/h);if(m>0){m=0}M();return(m===0)}function J(O){F(O);M();return(m===O)}function K(R){var T,Q,S,O,P;if(!f){return}T=e.find("li.active");if(!T.length){return}Q=T.width();S=T.offset().left;O=q.offset().left;P=S+Q-O;if(P>0){m=R?(m-P):-P;M()}}function M(){var O;m=m/1;O=L();u.stop().animate({left:O},"slow",function P(){var Q=N();if(m<Q){F(Q);u.stop().animate({left:L()},"fast")}})}function D(){s.data(b.DATA_KEY_IS_MOUSEDOWN,true);G()}function C(){q.data(b.DATA_KEY_IS_MOUSEDOWN,true);E(N())}function B(){s.data(b.DATA_KEY_IS_MOUSEDOWN,false)}function I(){q.data(b.DATA_KEY_IS_MOUSEDOWN,false)}return{getMinPos:N,incrementScrollLeft:H,incrementScrollRight:J,scrollToActiveTab:K,slideMovableContainerToLeftPos:M,startScrollLeft:D,startScrollRight:C,stopScrollLeft:B,stopScrollRight:I}}());n=(function(){function H(I){i.incrementScrollLeft()}function G(I){i.incrementScrollRight(i.getMinPos())}function C(I){i.startScrollLeft()}function B(I){i.startScrollRight()}function E(I){i.stopScrollLeft()}function D(I){i.stopScrollRight()}function F(J){var I=o.width();if(I===l){return false}l=I;A.refreshAllElementSizes(true)}return{handleClickOnLeftScrollArrow:H,handleClickOnRightScrollArrow:G,handleMousedownOnLeftScrollArrow:C,handleMousedownOnRightScrollArrow:B,handleMouseupOnLeftScrollArrow:E,handleMouseupOnRightScrollArrow:D,handleWindowResize:F}}());A=(function(){function G(){F();H()}function B(N){var M=f,L;C();E();if(f){K()}if(N&&(f||M)){if(f){L=i.getMinPos();if(m<L){i.incrementScrollRight(L)}else{i.scrollToActiveTab(true)}}else{m=0;i.slideMovableContainerToLeftPos()}}}function F(){y=z.find(".scrtabs-tabs-fixed-container");u=z.find(".scrtabs-tabs-movable-container");e=z.find(".nav-tabs");s=z.find(".scrtabs-js-tab-scroll-arrow-left");q=z.find(".scrtabs-js-tab-scroll-arrow-right");r=s.add(q);o=$(window)}function C(){j=z.width();l=o.width();J();I()}function H(){s.on({"mousedown.scrtabs":n.handleMousedownOnLeftScrollArrow,"mouseup.scrtabs":n.handleMouseupOnLeftScrollArrow,"click.scrtabs":n.handleClickOnLeftScrollArrow});q.on({"mousedown.scrtabs":n.handleMousedownOnRightScrollArrow,"mouseup.scrtabs":n.handleMouseupOnRightScrollArrow,"click.scrtabs":n.handleClickOnRightScrollArrow});o.smartresize(n.handleWindowResize)}function J(){y.width(p=z.width())}function D(){y.width(p)}function K(){y.width(p-g)}function I(){k=0;e.find("li").each(function L(){k+=$(this).width()});u.width(k)}function E(){var L=k>p;if(L&&!f){r.show();f=true;K()}else{if(!L&&f){r.hide();f=false;D()}}}return{initElements:G,refreshAllElementSizes:B}}());function t(C){z=C;x(function B(){A.initElements();A.refreshAllElementSizes();i.scrollToActiveTab()},100)}return{restrict:"E",template:d,transclude:false,replace:true,scope:{tabs:"@",localTabClick:"&tabClick"},link:function(D,C,B){D.tabsArr=D.$eval(D.tabs);C.on("click.scrollingTabs",".nav-tabs > li",function E(G){var F=$(this).data();D.localTabClick({$event:G,$index:F.index,tab:F.tabObj})});t(C)}}}c.$inject=["$timeout"];a.directive("scrollingTabs",c)}());